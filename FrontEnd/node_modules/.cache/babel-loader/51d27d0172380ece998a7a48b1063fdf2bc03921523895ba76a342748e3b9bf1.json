{"ast":null,"code":"import React,{useState}from\"react\";import{ComposableMap,Geographies,Geography,Marker}from\"react-simple-maps\";import{geoCentroid}from\"d3-geo\";import geoData from\"../features.json\";import{useNavigate}from\"react-router-dom\";import{useUser}from\"../contexts/UserContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MapComponent=()=>{const[visitedCountries,setVisitedCountries]=useState([]);const[selected,setSelected]=useState(null);const{user}=useUser();const navigate=useNavigate();const handleClick=geo=>{var _selected$geo;if((selected===null||selected===void 0?void 0:(_selected$geo=selected.geo)===null||_selected$geo===void 0?void 0:_selected$geo.id)===geo.id){setSelected(null);}else{const centroid=geoCentroid(geo);setSelected({geo,coordinates:centroid});}};const markAsVisited=async()=>{const code=selected.geo.id;const countryName=selected.geo.properties.name;if(!visitedCountries.includes(code)){setVisitedCountries([...visitedCountries,code]);try{const response=await fetch(\"https://6bmdup2xzi.execute-api.us-east-1.amazonaws.com/prod/AddUserCounrty\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:user===null||user===void 0?void 0:user.email,newCountry:countryName})});const data=await response.json();if(!response.ok){console.error(\"Failed to update country:\",data);alert(\"Error: \"+data.message);}else{console.log(\"Successfully updated:\",data);}}catch(err){console.error(\"Request failed:\",err);alert(\"An error occurred while marking the country.\");}}};const goToCountryPage=()=>{navigate(`/country/${selected.geo.properties.name}`);};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(ComposableMap,{projection:\"geoMercator\",children:[/*#__PURE__*/_jsx(Geographies,{geography:geoData,children:_ref=>{let{geographies}=_ref;return geographies.map(geo=>{const code=geo.id;const isVisited=visitedCountries.includes(code);return/*#__PURE__*/_jsx(Geography,{geography:geo,onClick:()=>handleClick(geo),style:{default:{fill:isVisited?\"#66bb6a\":\"#D6D6DA\",outline:\"none\",cursor:\"pointer\"},hover:{fill:isVisited?\"#388e3c\":\"#F53\",outline:\"none\"},pressed:{fill:isVisited?\"#2e7d32\":\"#E42\",outline:\"none\"}}},geo.rsmKey);});}}),selected&&selected.coordinates&&/*#__PURE__*/_jsx(Marker,{coordinates:selected.coordinates,children:/*#__PURE__*/_jsx(\"foreignObject\",{x:-60,y:-60,width:150,height:100,children:/*#__PURE__*/_jsxs(\"div\",{xmlns:\"http://www.w3.org/1999/xhtml\",style:{background:\"white\",border:\"1px solid #333\",borderRadius:\"6px\",padding:\"8px\",fontSize:\"12px\",width:\"120px\",boxShadow:\"0 2px 6px rgba(0,0,0,0.2)\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"strong\",{children:selected.geo.properties.name}),/*#__PURE__*/_jsx(\"span\",{onClick:()=>setSelected(null),style:{cursor:\"pointer\",color:\"red\",fontWeight:\"bold\"},children:\"\\xD7\"})]}),!visitedCountries.includes(selected.geo.id)?/*#__PURE__*/_jsx(\"button\",{onClick:markAsVisited,style:{marginTop:\"6px\",fontSize:\"11px\",padding:\"4px 6px\",background:\"#4CAF50\",color:\"white\",border:\"none\",borderRadius:\"3px\",cursor:\"pointer\"},children:\"Mark as Visited\"}):/*#__PURE__*/_jsx(\"p\",{style:{color:\"green\",fontSize:\"11px\",marginTop:\"6px\"},children:\"Already visited\"}),/*#__PURE__*/_jsx(\"button\",{onClick:goToCountryPage,style:{marginTop:\"6px\",fontSize:\"11px\",padding:\"4px 6px\",background:\"#1976d2\",color:\"white\",border:\"none\",borderRadius:\"3px\",cursor:\"pointer\"},children:\"View Details\"})]})})})]})});};export default MapComponent;","map":{"version":3,"names":["React","useState","ComposableMap","Geographies","Geography","Marker","geoCentroid","geoData","useNavigate","useUser","jsx","_jsx","jsxs","_jsxs","MapComponent","visitedCountries","setVisitedCountries","selected","setSelected","user","navigate","handleClick","geo","_selected$geo","id","centroid","coordinates","markAsVisited","code","countryName","properties","name","includes","response","fetch","method","headers","body","JSON","stringify","email","newCountry","data","json","ok","console","error","alert","message","log","err","goToCountryPage","children","projection","geography","_ref","geographies","map","isVisited","onClick","style","default","fill","outline","cursor","hover","pressed","rsmKey","x","y","width","height","xmlns","background","border","borderRadius","padding","fontSize","boxShadow","display","justifyContent","color","fontWeight","marginTop"],"sources":["C:/Users/adida/Desktop/NextTrip/FrontEnd/src/components/Map.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n  ComposableMap,\r\n  Geographies,\r\n  Geography,\r\n  Marker,\r\n} from \"react-simple-maps\";\r\nimport { geoCentroid } from \"d3-geo\";\r\nimport geoData from \"../features.json\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useUser } from \"../contexts/UserContext\";\r\n\r\nconst MapComponent = () => {\r\n  const [visitedCountries, setVisitedCountries] = useState([]);\r\n  const [selected, setSelected] = useState(null);\r\n  const { user } = useUser();\r\n  const navigate = useNavigate();\r\n\r\n  const handleClick = (geo) => {\r\n    if (selected?.geo?.id === geo.id) {\r\n      setSelected(null);\r\n    } else {\r\n      const centroid = geoCentroid(geo);\r\n      setSelected({ geo, coordinates: centroid });\r\n    }\r\n  };\r\n\r\n  const markAsVisited = async () => {\r\n    const code = selected.geo.id;\r\n    const countryName = selected.geo.properties.name;\r\n   if (!visitedCountries.includes(code)) {\r\n      setVisitedCountries([...visitedCountries, code]);\r\n      try {\r\n        const response = await fetch(\"https://6bmdup2xzi.execute-api.us-east-1.amazonaws.com/prod/AddUserCounrty\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            email: user?.email,\r\n            newCountry: countryName,\r\n          }),\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        if (!response.ok) {\r\n          console.error(\"Failed to update country:\", data);\r\n          alert(\"Error: \" + data.message);\r\n        } else {\r\n          console.log(\"Successfully updated:\", data);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Request failed:\", err);\r\n        alert(\"An error occurred while marking the country.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const goToCountryPage = () => {\r\n    navigate(`/country/${selected.geo.properties.name}`);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ComposableMap projection=\"geoMercator\">\r\n        <Geographies geography={geoData}>\r\n          {({ geographies }) =>\r\n            geographies.map((geo) => {\r\n              const code = geo.id;\r\n              const isVisited = visitedCountries.includes(code);\r\n\r\n              return (\r\n                <Geography\r\n                  key={geo.rsmKey}\r\n                  geography={geo}\r\n                  onClick={() => handleClick(geo)}\r\n                  style={{\r\n                    default: {\r\n                      fill: isVisited ? \"#66bb6a\" : \"#D6D6DA\",\r\n                      outline: \"none\",\r\n                      cursor: \"pointer\",\r\n                    },\r\n                    hover: {\r\n                      fill: isVisited ? \"#388e3c\" : \"#F53\",\r\n                      outline: \"none\",\r\n                    },\r\n                    pressed: {\r\n                      fill: isVisited ? \"#2e7d32\" : \"#E42\",\r\n                      outline: \"none\",\r\n                    },\r\n                  }}\r\n                />\r\n              );\r\n            })\r\n          }\r\n        </Geographies>\r\n\r\n        {selected && selected.coordinates && (\r\n          <Marker coordinates={selected.coordinates}>\r\n            <foreignObject x={-60} y={-60} width={150} height={100}>\r\n              <div\r\n                xmlns=\"http://www.w3.org/1999/xhtml\"\r\n                style={{\r\n                  background: \"white\",\r\n                  border: \"1px solid #333\",\r\n                  borderRadius: \"6px\",\r\n                  padding: \"8px\",\r\n                  fontSize: \"12px\",\r\n                  width: \"120px\",\r\n                  boxShadow: \"0 2px 6px rgba(0,0,0,0.2)\",\r\n                }}\r\n              >\r\n                <div\r\n                  style={{ display: \"flex\", justifyContent: \"space-between\" }}\r\n                >\r\n                  <strong>{selected.geo.properties.name}</strong>\r\n                  <span\r\n                    onClick={() => setSelected(null)}\r\n                    style={{\r\n                      cursor: \"pointer\",\r\n                      color: \"red\",\r\n                      fontWeight: \"bold\",\r\n                    }}\r\n                  >\r\n                    Ã—\r\n                  </span>\r\n                </div>\r\n\r\n                {!visitedCountries.includes(selected.geo.id) ? (\r\n                  <button\r\n                    onClick={markAsVisited}\r\n                    style={{\r\n                      marginTop: \"6px\",\r\n                      fontSize: \"11px\",\r\n                      padding: \"4px 6px\",\r\n                      background: \"#4CAF50\",\r\n                      color: \"white\",\r\n                      border: \"none\",\r\n                      borderRadius: \"3px\",\r\n                      cursor: \"pointer\",\r\n                    }}\r\n                  >\r\n                    Mark as Visited\r\n                  </button>\r\n                ) : (\r\n                  <p\r\n                    style={{\r\n                      color: \"green\",\r\n                      fontSize: \"11px\",\r\n                      marginTop: \"6px\",\r\n                    }}\r\n                  >\r\n                    Already visited\r\n                  </p>\r\n                )}\r\n                <button\r\n                  onClick={goToCountryPage}\r\n                  style={{\r\n                    marginTop: \"6px\",\r\n                    fontSize: \"11px\",\r\n                    padding: \"4px 6px\",\r\n                    background: \"#1976d2\",\r\n                    color: \"white\",\r\n                    border: \"none\",\r\n                    borderRadius: \"3px\",\r\n                    cursor: \"pointer\",\r\n                  }}\r\n                >\r\n                  View Details\r\n                </button>\r\n              </div>\r\n            </foreignObject>\r\n          </Marker>\r\n        )}\r\n      </ComposableMap>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapComponent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}